!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var r in i)("object"==typeof exports?exports:t)[r]=i[r]}}(self,(()=>(()=>{"use strict";var t={195:(t,e,i)=>{i.r(e)},152:function(t,e,i){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Barrage=void 0,i(195);var n=i(358),o=i(593),a=function(){function t(e){var i=this;this.trackList=[],this.timer=void 0,this.distributeBarrage=function(){for(var t=0,e=i.trackList;t<e.length;t++){var r=e[t];if(r.hasPosition()){var n=i.data.shift();if(!n)return;r.addBullet(n),r.putInTrack(),i.emit("dataChange",{data:i.data})}}},this.$container=e.container,this.data=e.data,this.config=r(r({},t.defaultConfig),e.config),this._listeners={},this._render()}return t.prototype._render=function(){this.$container.classList.add("barrage-container"),this.$curtain=document.createElement("div"),this.$curtain.classList.add("barrage-curtain"),this.$container.appendChild(this.$curtain);for(var t=this.config,e=t.trackNumber,i=t.trackHeight,r=this.$curtain.clientHeight,a=0;a<e;a++){var s=new n.Track({config:this.config,data:[],top:a*i,speed:(0,o.createRandomNum)()});if((a+1)*i>r)return;this.trackList.push(s),this.$curtain.appendChild(s.$trackEle)}},t.prototype.addData=function(t){var e;Array.isArray(t)?(e=this.data).push.apply(e,t):this.data.push(t),this.emit("dataChange",{data:this.data})},t.prototype.play=function(){this.timer||(this.timer=window.setInterval(this.distributeBarrage,1e3))},t.prototype.pause=function(){this.stopPut(),this.trackList.forEach((function(t){t.stopAllMove()}))},t.prototype.continue=function(){this.trackList.forEach((function(t){t.continueMove()})),this.play()},t.prototype.stopPut=function(){window.clearInterval(this.timer),this.timer=void 0},t.prototype.on=function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this},t.prototype.off=function(t,e){if(this._listeners[t]){var i=this._listeners[t].indexOf(e);i>-1&&this._listeners[t].splice(i,1)}return this},t.prototype.emit=function(t,e){if(void 0===e&&(e={}),this._listeners[t])for(var i=0,n=this._listeners[t];i<n.length;i++){var o=n[i],a=r(r({},e),{name:t});o.call(this,a)}return this},t.prototype.destroy=function(){this.stopPut(),this.$container.removeChild(this.$curtain),this.trackList=[],this.emit("destroy")},t.defaultConfig={fontSize:"20px",defaultColor:"#000",useRandomColor:!1,trackNumber:3,trackHeight:40},t}();e.Barrage=a},208:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bullet=void 0;var r=i(593),n=function(){function t(t){var e=this;this.animate=function(){e.left-=e.speed,e.$bulletEle.style.left=e.left+"px",e.left<-e.$bulletEle.offsetWidth?e.destroy():e.animation&&(0,r.requestAnimationFrame)((function(){return e.animate()}))},this.config=t.config,this.key=t.key,this.left=t.left,this.speed=t.speed,this.removeBullet=t.removeBullet,this.$bulletEle=this.createBullet(t)}return t.prototype.createBullet=function(t){var e=document.createElement("span");return e.classList.add("barrage-item"),e.style.left=t.left+"px",e.style.color=this.getBarrageColor(t.color),e.style.fontSize=t.fontSize||this.config.fontSize,e.attributes["barrage-id"]=t.key,e.innerText=t.text,e},t.prototype.getBarrageColor=function(t){var e=this.config,i=e.useRandomColor,n=e.defaultColor;return i?(0,r.getRandomColor)():t||n},t.prototype.move=function(){var t=this;this.animation||(this.animation=(0,r.requestAnimationFrame)((function(){return t.animate()})))},t.prototype.stop=function(){this.animation&&((0,r.cancelAnimationFrame)(this.animation),this.animation=void 0)},t.prototype.destroy=function(){this.stop(),this.removeBullet(this)},t}();e.Bullet=n},358:function(t,e,i){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var n=i(208),o=function(){function t(t){var e=this;this.destroyBullet=function(t){var i=e.bulletList.findIndex((function(e){return e.key===t.key}));-1!==i&&e.bulletList.splice(i,1),e.$trackEle.removeChild(t.$bulletEle)},this.data=t.data,this.top=t.top,this.speed=t.speed,this.height=t.config.trackHeight,this.config=t.config,this.bulletList=[],this.$trackEle=this.createTrack()}return t.prototype.createTrack=function(){var t=document.createElement("div");return t.classList.add("barrage-track"),t.style.top=this.top+"px",t.style.height=this.height+"px",t},t.prototype.addBullet=function(t){this.data.push(t)},t.prototype.hasPosition=function(){if(!this.$trackEle.hasChildNodes())return!0;var t=this.$trackEle.offsetWidth,e=this.$trackEle.lastElementChild;return t-e.offsetLeft-e.offsetWidth>100},t.prototype.putInTrack=function(){if(this.data.length){var t=this.data.shift(),e=new n.Bullet(r(r({},t),{left:this.$trackEle.offsetWidth,speed:t.speed||this.speed,removeBullet:this.destroyBullet,config:this.config}));this.bulletList.push(e),this.$trackEle.appendChild(e.$bulletEle),e.move()}},t.prototype.stopAllMove=function(){this.bulletList.forEach((function(t){t.stop()}))},t.prototype.continueMove=function(){this.bulletList.forEach((function(t){t.move()}))},t}();e.Track=o},593:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomColor=e.createRandomNum=e.cancelAnimationFrame=e.requestAnimationFrame=void 0,e.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,e.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame,e.createRandomNum=function(){return 1+Math.random()},e.getRandomColor=function(){var t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),i=Math.floor(256*Math.random());return"#"+t.toString(16).padStart(2,"0")+e.toString(16).padStart(2,"0")+i.toString(16).padStart(2,"0")}}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,i),o.exports}return i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(152)})()));